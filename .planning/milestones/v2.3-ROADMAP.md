# Milestone v2.3: Birthday Field Migration

**Status:** SHIPPED 2026-02-06
**Phases:** 33
**Total Plans:** 2

## Overview

Replace the separate important_date post type birthday sync with a direct `acf.birthdate` field on the person CPT, simplifying the data model and removing an entire sync lifecycle.

## Phases

### Phase 33: Birthday Field Migration

**Goal**: Birthdate syncs as an ACF field on the person record, replacing the separate important_date post lifecycle entirely
**Depends on**: Nothing (standalone migration within existing people pipeline)
**Requirements**: BDAY-01, BDAY-02, BDAY-03, BDAY-04
**Success Criteria** (what must be TRUE):
  1. Running `scripts/sync.sh people` populates `acf.birthdate` (Y-m-d format) on every person in Stadion that has a DateOfBirth in Sportlink
  2. The people pipeline no longer creates, updates, or deletes `important_date` posts for birthdays
  3. The `stadion_important_dates` table no longer exists (or is fully unused) in `stadion-sync.sqlite`
  4. Email report after a people sync shows birthdate sync results without a separate "Important Dates" section
**Plans**: 2 plans

Plans:

- [x] 33-01: Add birthdate to person ACF payload and remove birthday sync step
- [x] 33-02: Deprecate DB table and update docs/tools

**Details:**

**Plan 33-01** added `extractBirthdate()` function to `prepare-stadion-members.js` and removed the birthday sync step from the people pipeline (8 steps â†’ 7 steps). Birthday data now flows through the existing person sync with hash-based change detection. Commits: `1e075be`, `6c36fd4`.

**Plan 33-02** deprecated all 8 `stadion_important_dates` database functions with `@deprecated` JSDoc tags, removed `--reset-dates` from validate-stadion-ids.js, added deprecation warning to find-orphan-dates.js, and updated 14 documentation files. Commits: `e7796f8`, `b5452dd`.

**Post-phase fix** (`36e61c9`): Removed leftover birthday sync references from sync-all.js, package.json, and install-cron.sh.

---

## Milestone Summary

**Key Decisions:**

- Birthdate as ACF field on person (eliminates complex important_date post lifecycle)
- No separate birthdate counter in email report (covered by person sync stats)
- Keep stadion_important_dates table schema for backward compatibility
- @deprecated JSDoc pattern for DB functions (kept in exports)
- Documentation deprecation pattern: "(DEPRECATED - v2.3)" prefix

**Issues Resolved:**

- Birthday sync 404 errors (resolved by migrating away from important_date posts entirely)
- Leftover birthday sync references in sync-all.js, package.json, install-cron.sh (caught by audit, fixed in 36e61c9)

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- `steps/sync-important-dates.js` still exists as unused file (kept for backward compat)
- `stadion_important_dates` table schema retained in stadion-db.js (backward compat)
- 8 deprecated DB functions still exported in module.exports

---

_For current project status, see .planning/ROADMAP.md_
