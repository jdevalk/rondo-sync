# Requirements Archive: v1.3 Connect to Stadion

**Archived:** 2026-01-25
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.3.
For current requirements, see `.planning/PROJECT.md` (Validated section).

---

# Requirements: Sportlink Sync

**Defined:** 2026-01-25
**Core Value:** Keep downstream systems (Laposta, Stadion) automatically in sync with Sportlink member data without manual intervention.

## v1.3 Requirements

Requirements for Stadion integration. Each maps to roadmap phases.

### Stadion API Client

- [x] **STAD-01**: Sync creates new person in Stadion when member doesn't exist
- [x] **STAD-02**: Sync updates existing person when member data changes
- [x] **STAD-03**: Authenticate via WordPress application password
- [x] **STAD-04**: Handle API errors gracefully without failing entire sync

### Field Mapping

- [x] **STAD-05**: Map first/last name (handling tussenvoegsel)
- [x] **STAD-06**: Map email/mobile/phone to contact_info repeater
- [x] **STAD-07**: Map address fields to addresses repeater
- [x] **STAD-08**: Map gender code to Stadion gender values
- [x] **STAD-09**: Extract birth year from geboortedatum

### Member Matching

- [x] **STAD-10**: Store Sportlink relatiecode as "KNVB ID" custom field
- [x] **STAD-11**: Match by KNVB ID first, fall back to email
- [x] **STAD-12**: Use hash-based change detection like Laposta

### Parent Sync

- [x] **STAD-13**: Create parent as separate person record
- [x] **STAD-14**: Deduplicate parents across members (like Laposta)
- [x] **STAD-15**: Link parent to child via relationships field

### Pipeline Integration

- [x] **STAD-16**: Add Stadion sync to sync-all.js pipeline
- [x] **STAD-17**: Include Stadion results in email report
- [x] **STAD-18**: Configure Stadion via environment variables

## Future Requirements

Deferred to later milestones.

### Bidirectional Sync

- **BIDI-01**: Read changes from Stadion
- **BIDI-02**: Sync Stadion changes back to Sportlink
- **BIDI-03**: Sync Stadion changes to Laposta
- **BIDI-04**: Conflict resolution when sources disagree

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Photo sync | Storage/bandwidth costs, not needed for v1.3 |
| Team/work_history sync | Sportlink doesn't provide team role data |
| Relationship types | Only parent/child for now, expand later |
| Delete sync | Members removed from Sportlink stay in Stadion |
| Stadion → Sportlink | Bidirectional sync deferred to future milestone |

## Traceability

Which phases cover which requirements.

| Requirement | Phase | Status |
|-------------|-------|--------|
| STAD-01 | Phase 6 | ✅ Complete |
| STAD-02 | Phase 6 | ✅ Complete |
| STAD-03 | Phase 5 | ✅ Complete |
| STAD-04 | Phase 5 | ✅ Complete |
| STAD-05 | Phase 6 | ✅ Complete |
| STAD-06 | Phase 6 | ✅ Complete |
| STAD-07 | Phase 6 | ✅ Complete |
| STAD-08 | Phase 6 | ✅ Complete |
| STAD-09 | Phase 6 | ✅ Complete |
| STAD-10 | Phase 6 | ✅ Complete |
| STAD-11 | Phase 6 | ✅ Complete |
| STAD-12 | Phase 6 | ✅ Complete |
| STAD-13 | Phase 7 | ✅ Complete |
| STAD-14 | Phase 7 | ✅ Complete |
| STAD-15 | Phase 7 | ✅ Complete |
| STAD-16 | Phase 8 | ✅ Complete |
| STAD-17 | Phase 8 | ✅ Complete |
| STAD-18 | Phase 5 | ✅ Complete |

**Coverage:**
- v1.3 requirements: 18 total
- Shipped: 18
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 18 of 18 v1.3 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-25 as part of v1.3 milestone completion*
